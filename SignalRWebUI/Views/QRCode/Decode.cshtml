@{
    ViewData["Title"] = "QR Kod Okuma";
    Layout = "~/Views/AdminLayout/Index.cshtml";
}

<div class="container d-flex flex-column align-items-center justify-content-center" style="min-height: 80vh;">
    <h3 class="text-center mb-4 mt-5">QR Kod Okuma Sayfası</h3>

    <!-- Geçiş Butonları -->
    <div class="mb-4">
        <a asp-controller="QRCode" asp-action="Index" class="btn btn-outline-warning me-2">QR Kod Oluştur</a>
        <a asp-controller="QRCode" asp-action="Decode" class="btn btn-warning">QR Kod Oku</a>
    </div>

    <form method="post" enctype="multipart/form-data" class="w-100" style="max-width: 500px;">
        <input type="file" name="file" accept="image/*" class="form-control mb-3" />
        <button type="submit" class="btn btn-warning w-100">QR Görselini Oku</button>
    </form>

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-warning mt-4 w-100 text-center" style="max-width: 500px;">
            @ViewBag.Error
        </div>
    }

    @if (ViewBag.Success == true)
    {
        <div class="text-center mt-4">
            <h3>Çözümlenen Metin:</h3>
            <pre class="mb-3 text-start border rounded p-2 bg-light"
                 style="white-space: pre-wrap; max-width:500px; margin:auto;">@ViewBag.Decoded</pre>

            @if (ViewBag.UploadedImageBase64 != null)
            {
                <h5 class="mt-3">Yüklenen QR Görseli:</h5>
                <img src="@ViewBag.UploadedImageBase64"
                     alt="Yüklenen QR"
                     class="img-fluid border rounded p-2"
                     style="max-width:300px; max-height:300px;" />
            }
        </div>
    }
    else if (ViewBag.Success == false)
    {
        <div class="alert alert-danger mt-4 w-100 text-center" style="max-width: 500px;">
            QR kod çözümlenemedi. Farklı bir görsel deneyin.
        </div>
    }
</div>
